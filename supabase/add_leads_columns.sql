-- Fix lot_size_sqft column naming to match schema
ALTER TABLE public.leads RENAME COLUMN lot_size_sqft TO lot_size_sq_ft;

-- Migration: Add all missing columns from the CSV to the leads table, using snake_case
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS first_name TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS last_name TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS recipient_address TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS recipient_city TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS recipient_state TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS recipient_postal_code TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS county TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS owner_type TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS last_sales_date TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS last_sales_price NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS price_per_sq_ft NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS lot_size_sq_ft NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_1 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_1_type TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_1_dnc TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_1_litigator TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_2 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_2_type TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_2_dnc TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_2_litigator TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_3 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_3_type TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_3_dnc TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_phone_3_litigator TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_email_2 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact1_email_3 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_name TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_1 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_1_type TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_1_dnc TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_1_litigator TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_email_1 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_2 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_2_type TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_2_dnc TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_2_litigator TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_3 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_3_type TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_3_dnc TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_phone_3_litigator TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_email_2 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact2_email_3 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_name TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_1 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_1_type TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_1_dnc TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_1_litigator TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_email_1 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_2 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_2_type TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_2_dnc TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_2_litigator TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_email_2 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_3 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_3_type TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_3_dnc TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_phone_3_litigator TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS contact3_email_3 TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS house_style TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS assessed_year TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS school_district TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS stories TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS heating_fuel TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS subdivision TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS zoning TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS units TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS condition TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS exterior TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS interior_walls TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS basement TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS roof TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS roof_shape TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS water TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS sewer TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS location_influence TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS heating TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS air_conditioning TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS fireplace TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS garage TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS patio TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS pool TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS porch TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS tax_amount NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS rental_estimate_low NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS rental_estimate_high NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS market_value NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_listing_id TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_list_date TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_sold_date TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_list_price NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_sale_price NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_description TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_source TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_list_agent_name TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_list_agent_phone TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_list_agent_email TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_list_agent_office TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_price_per_sqft NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_sqft NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_basement TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_lot NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_beds NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_baths NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_garage TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_stories TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_year_built TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_curr_photos TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_listing_id TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_status TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_list_date TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_sold_date TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_days_on_market TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_list_price NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_sale_price NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_description TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_source TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_list_agent_name TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_list_agent_phone TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_list_agent_email TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_list_agent_office TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_price_per_sqft NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_sqft NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_basement TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_lot NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_beds NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_baths NUMERIC;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_garage TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_stories TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_year_built TEXT;
ALTER TABLE public.leads ADD COLUMN IF NOT EXISTS mls_prev_photos TEXT;
-- The following columns are already present: id, created_at, updated_at, status, lead_source_id, assigned_to, notes, last_contacted_at, raw_lead_table, raw_lead_id, contact1_name, contact1_email_1, contact2_name, contact2_email_1, property_address, property_city, property_state, property_postal_code, property_type, baths, beds, year_built, square_footage, wholesale_value, assessed_total, mls_curr_status, mls_curr_days_on_market, avm, source_id, address_hash
-- If you need to adjust types for any column, do so manually below.
